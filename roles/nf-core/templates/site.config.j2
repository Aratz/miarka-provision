
singularity.libraryDir = '{{ nf_core_vars.NXF_SINGULARITY_LIBRARYDIR }}'
singularity.cacheDir = '{{ nf_core_vars.NXF_SINGULARITY_CACHEDIR }}'

params.seq_center = "SciLifeLab National Genomics Infrastructure {{ site_full | capitalize }}"
params.igenomes_base = '{{ genomes_basedir }}/igenomes'
params.genomes_base = params.genome == 'GRCh37' ? '{{ genomes_basedir }}/ToolBox/ReferenceAssemblies/hg38make/bundle/2.8/b37' : '{{ genomes_basedir }}/ToolBox/hg38bundle'

{% if pipeline == 'methylseq' or pipeline == 'ampliseq' %}
process {

  {% if pipeline == 'methylseq' %}

  memory = { 15.GB * task.attempt }
  time = { 6.h * task.attempt }

  withName:qualimap {
        cpus = { 4 * task.attempt }
        memory = { 62.GB * task.attempt }
        time = { 2.d * task.attempt }
  }

}

  {% elif pipeline == 'ampliseq' %}

  withName:QIIME2_CLASSIFY {
        cpus = 20
        memory = 120.GB
        time = 36.h
  }

}

params.reference_database = '{{ ngi_containers }}/{{ pipeline }}/{{ silva_zip }}'

  {% endif %}

{% elif pipeline == 'rnaseq' %}

params.reverseStranded = true

{% endif %}
